<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pedidos</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      max-width: 600px;
      margin: auto;
    }

    h2 {
      margin-top: 2rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
    }

    .pedido {
      border: 1px solid #ccc;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border-radius: 5px;
    }

    button {
      margin-top: 1rem;
      padding: 1rem;
      width: 100%;
      font-size: 1.1rem;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 8px;
    }

    .btn-small {
      font-size: 0.8rem;
      margin: 0.25rem;
    }
  </style>
</head>
<body>
  <h1>üçî Sistema de Pedidos</h1>

  <form id="formulario">
    <h2>Producto</h2>
    <select id="producto" required>
      <option value="">-- Selecciona --</option>
      <optgroup label="Hamburguesas">
        <option value="Hamburguesa">Hamburguesa</option>
      </optgroup>
      <optgroup label="Hot Dogs">
        <option value="Hot Dog">Hot Dog</option>
      </optgroup>
      <optgroup label="Papas">
        <option value="Papas Francesas">Papas Francesas</option>
        <option value="Papas Gajo">Papas Gajo</option>
        <option value="Shingo Papas Francesas">Shingo Papas Francesas</option>
        <option value="Shingo Papas Gajo">Shingo Papas Gajo</option>
      </optgroup>
      <optgroup label="Bebidas">
        <option value="Refresco">Refresco</option>
        <option value="Malteada">Malteada</option>
        <option value="Soda Italiana">Soda Italiana</option>
        <option value="Cerveza">Cerveza</option>
        <option value="Michelada">Michelada</option>
      </optgroup>
    </select>

    <div id="detalles"></div>

    <button type="submit">Agregar al pedido</button>
  </form>

  <h2>üßæ Pedido actual</h2>
  <div id="lista-pedidos"></div>

  <h3>Total: $<span id="total">0</span></h3>

  <button id="enviar">Enviar a cocina</button>

  <script>
    const productoSelect = document.getElementById("producto");
    const detalles = document.getElementById("detalles");
    const listaPedidos = document.getElementById("lista-pedidos");
    const totalSpan = document.getElementById("total");
    const formulario = document.getElementById("formulario");
    const enviarBtn = document.getElementById("enviar");

    let pedidos = [];

    const precios = {
      "Hamburguesa": { chica: 95, grande: 125, toxica: [125, 155], clasica: [65, 95] },
      "Hot Dog": { base: 80, clasico: 65 },
      "Papas Francesas": 45,
      "Papas Gajo": 55,
      "Shingo Papas Francesas": 145,
      "Shingo Papas Gajo": 155,
      "Refresco": 25,
      "Malteada": 70,
      "Soda Italiana": 50,
      "Cerveza": 35,
      "Michelada": 55
    };

    productoSelect.addEventListener("change", () => {
      const prod = productoSelect.value;
      detalles.innerHTML = "";

      if (prod === "Hamburguesa" || prod === "Hot Dog") {
        detalles.innerHTML += `
          <h3>Tipo</h3>
          <select id="tipo" required>
            <option value="">-- Selecciona --</option>
            <option value="Cl√°sica">Cl√°sica</option>
            <option value="Tocino">Tocino</option>
            <option value="Guacamole">Guacamole</option>
            <option value="Queso">Queso</option>
            <option value="Chistorra">Chistorra</option>
            <option value="Pi√±a">Pi√±a</option>
            <option value="La T√≥xica">La T√≥xica</option>
          </select>
        `;
        if (prod === "Hamburguesa") {
          detalles.innerHTML += `
            <h3>Tama√±o</h3>
            <label><input type="radio" name="tamano" value="chica" required> Chica</label>
            <label><input type="radio" name="tamano" value="grande"> Grande</label>
            <h3>¬øDeseas en combo?</h3>
            <label><input type="checkbox" id="combo" /> S√≠, quiero combo (+$60)</label>
            <div id="combo-opciones" style="margin-top: 1rem; display: none;">
              <h4>Tipo de papas</h4>
              <label><input type="radio" name="papasCombo" value="Francesas"> Francesas</label>
              <label><input type="radio" name="papasCombo" value="Gajo"> Gajo</label>
            </div>
          `;
        }
      } else if (prod === "Malteada") {
        detalles.innerHTML = `
          <h3>Sabor</h3>
          <select id="sabor">
            <option>Chocomenta</option><option>Mazap√°n</option><option>Galleta</option><option>Moka</option>
            <option>Coco</option><option>Caf√©</option><option>Nutella</option><option>Chicle</option>
            <option>Vainilla</option><option>Fresa</option><option>Chocolate</option>
          </select>
        `;
      } else if (prod === "Soda Italiana") {
        detalles.innerHTML = `
          <h3>Sabor</h3>
          <select id="sabor">
            <option>Mora azul</option><option>Manzana verde</option><option>Frutos rojos</option>
          </select>
        `;
      } else if (prod === "Michelada") {
        detalles.innerHTML = `
          <h3>¬øQu√© lleva?</h3>
          <label><input type="checkbox" value="Clamato" class="michelada"> Clamato</label>
          <label><input type="checkbox" value="Salsas" class="michelada"> Salsas</label>
          <label><input type="checkbox" value="Lim√≥n" class="michelada"> Lim√≥n</label>
          <label><input type="checkbox" value="Escarchado con sal" class="michelada"> Escarchado con sal</label>
          <label><input type="checkbox" value="Ajonjol√≠" class="michelada"> Ajonjol√≠</label>
          <label><input type="checkbox" value="Taj√≠n" class="michelada"> Taj√≠n</label>
        `;
      }
    });

    detalles.addEventListener('change', (e) => {
      if (e.target.id === 'combo') {
        const comboOpciones = document.getElementById("combo-opciones");
        comboOpciones.style.display = e.target.checked ? "block" : "none";
      }
    });

    formulario.addEventListener("submit", (e) => {
      e.preventDefault();
      const prod = productoSelect.value;
      let item = { prod };

      if (prod === "Hamburguesa" || prod === "Hot Dog") {
        const tipo = document.getElementById("tipo").value;
        if (!tipo) return alert("Selecciona tipo.");
        item.tipo = tipo;

        if (prod === "Hamburguesa") {
          const tam = document.querySelector('input[name="tamano"]:checked');
          if (!tam) return alert("Selecciona tama√±o.");
          item.tamano = tam.value;

          const combo = document.getElementById("combo").checked;
          item.combo = combo;
          if (combo) {
            const papas = document.querySelector('input[name="papasCombo"]:checked');
            if (!papas) return alert("Selecciona tipo de papas para el combo.");
            item.papasCombo = papas.value;
          }
        }
      } else if (prod === "Malteada" || prod === "Soda Italiana") {
        item.sabor = document.getElementById("sabor").value;
      } else if (prod === "Michelada") {
        item.ingredientes = [];
        document.querySelectorAll(".michelada:checked").forEach(i => item.ingredientes.push(i.value));
      }

      pedidos.push(item);
      mostrarPedidos();
      formulario.reset();
      detalles.innerHTML = "";
    });

    function calcularPrecio(p) {
      let total = 0;
      if (p.prod === "Hamburguesa") {
        if (p.tipo === "La T√≥xica") total += precios.Hamburguesa.toxica[p.tamano === "chica" ? 0 : 1];
        else if (p.tipo === "Cl√°sica") total += precios.Hamburguesa.clasica[p.tamano === "chica" ? 0 : 1];
        else total += precios.Hamburguesa[p.tamano];
        if (p.combo) total += 60;
      } else if (p.prod === "Hot Dog") {
        total += p.tipo === "Cl√°sica" ? precios["Hot Dog"].clasico : precios["Hot Dog"].base;
      } else {
        total += precios[p.prod];
      }
      return total;
    }

    function mostrarPedidos() {
      listaPedidos.innerHTML = "";
      let suma = 0;
      pedidos.forEach((p, i) => {
        const div = document.createElement("div");
        let txt = `üîπ ${p.prod}`;
        if (p.tipo) txt += ` - ${p.tipo}`;
        if (p.tamano) txt += ` (${p.tamano})`;
        if (p.combo) txt += ` ü•§üçü En combo con papas ${p.papasCombo}`;
        if (p.sabor) txt += ` - Sabor: ${p.sabor}`;
        if (p.ingredientes) txt += ` - Ingredientes: ${p.ingredientes.join(", ")}`;
        const precio = calcularPrecio(p);
        suma += precio;
        txt += ` ‚Äî $${precio}`;
        div.className = "pedido";
        div.innerHTML = txt;
        listaPedidos.appendChild(div);
      });
      totalSpan.textContent = suma;
    }

    enviarBtn.addEventListener("click", () => {
      if (!pedidos.length) return alert("No hay pedidos.");
      alert("Pedido enviado a cocina.");
      pedidos = [];
      mostrarPedidos();
    });
  </script>
</body>
</html>
